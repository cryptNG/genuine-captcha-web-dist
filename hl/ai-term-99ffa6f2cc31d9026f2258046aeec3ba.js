const tpl1=document.createElement("template")
tpl1.id="ai-term",tpl1.innerHTML='<div style="display: inline-flex;">\n<span class="ai-term" part="ai-term-tag">\n  <slot>\n  </slot>\n  \n    </span>\n\n</div>'
const tpl2=document.createElement("template")
tpl2.id="ai-term-chat",tpl2.innerHTML='<div id="ai-term-chat-window" part="ai-term-chat">\n<div class="title"><svg\nwidth="120"\nviewBox="0 0 76.231392 11.96944"\nversion="1.1"\nid="svg5"\nxmlns="http://www.w3.org/2000/svg"\nxmlns:svg="http://www.w3.org/2000/svg">\n\n<g\n  id="layer1"\n  transform="translate(-33.29779,-110.10422)">\n <g\n    id="g1245">\n   <text\n      xml:space="preserve"\n      style="font-weight:300;font-size:16.9333px;font-family:Quicksand;fill:#1984ef;fill-opacity:1;stroke-width:0.442;stroke-linecap:round"\n      x="42.026588"\n      y="121.90433"\n      id="text236"><tspan\n        id="tspan234"\n        style="fill:#1984ef;fill-opacity:1;stroke-width:0.442"\n        x="42.026588"\n        y="121.90433"><tspan\n          style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16.9333px;font-family:Quicksand;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:\'wght\' 500;fill:#1984ef;fill-opacity:1"\n          id="tspan340">ai-term</tspan></tspan></text>\n   <path\n      style="font-variation-settings:\'wght\' 500;fill:none;stroke-width:1;stroke-linecap:round;stroke-dasharray:none"\n      d="m 39.938875,110.10422 -6.33762,3.65902 6.363017,3.67369"\n      id="path469" />\n   <path\n      style="font-variation-settings:\'wght\' 500;fill:none;stroke:#ffffff;stroke-width:1.3;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1"\n      d="m 40.392726,113.73502 -6.445001,3.72102 6.44548,3.72131"\n      id="path1133" />\n   <path\n      style="font-variation-settings:\'wght\' 500;fill:none;stroke:#ffffff;stroke-width:1.3;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1"\n      d="m 102.43425,113.82621 6.445,3.72102 -6.44548,3.72131"\n      id="path1133-3" />\n </g>\n</g>\n</svg>\n<div class="window-buttons"><span class="minify"><svg width="16px" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n<rect style="fill:transparent;stroke:white;stroke-width:12px;" x="4" y="88" width="92" height="8" rx="5 " />\n</svg></span><span class="midify"><svg width="16px" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n<rect style="fill:transparent;stroke:white;stroke-width:12px;" x="4" y="54" width="92" height="42" rx="5 " />\n</svg></span><span class="maxify"><svg width="16px" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n<rect style="fill:transparent;stroke:white;stroke-width:12px;" x="4" y="4" width="92" height="92" rx="5  " />\n</svg></span><span class="close">X</span></div>\n</div>\n<style>\n  div.window-buttons>span{\n    display:inline-block;\n    width:20px;\n    margin-left:5px;\n    cursor:pointer;\n  }\n  \n\n  \n</style>\n<form>\n\n<label for="ai-term-bot">Ai Term Chat</label>\n<div class="textarea" id="ai-term-bot"></div>\n<div class="prompt-ask">\n  <input id="ai-term-prompt" placeholder="Message to ask AI-TERM"/>\n  <button id="ai-term-ask">Ask</button>\n</div>\n</form>\n</div>',document.querySelector("body").prepend(tpl2),document.querySelector("body").prepend(tpl1)
class AiTerm extends HTMLElement{constructor(){super(),this.prompt=""
const t=document.getElementById("ai-term").content,e=this.attachShadow({mode:"open"}),n=document.createElement("style")
n.textContent="\n            span.ai-term { padding: 0px;border-bottom: 0.1em dashed color(display-p3 1.000000 0.270588 0.000000 / 0.701961);cursor: pointer;}\n        ",e.appendChild(n),e.appendChild(t.cloneNode(!0)),e.querySelector(".ai-term").addEventListener("click",(()=>{document.querySelector("body").aiTermInputRef.value=null===(this.prompt||null)?this.textContent:this.prompt,document.querySelector("body").aiTermChatWindowRef.classList.add("active"),document.querySelector("body").aiTermButtonRef.click()}))}static get observedAttributes(){return["prompt"]}attributeChangedCallback(t,e,n){"prompt"===t&&(this.prompt=n)}}customElements.define("ai-term",AiTerm)
class AiTermChat extends HTMLElement{minify(t){t.target.closest("#ai-term-chat-window").classList.add("min-size"),t.target.closest("#ai-term-chat-window").classList.remove("max-size"),t.target.closest("#ai-term-chat-window").classList.remove("mid-size")}midify(t){t.target.closest("#ai-term-chat-window").classList.add("mid-size"),t.target.closest("#ai-term-chat-window").classList.remove("max-size"),t.target.closest("#ai-term-chat-window").classList.remove("min-size")}maxify(t){t.target.closest("#ai-term-chat-window").classList.add("max-size"),t.target.closest("#ai-term-chat-window").classList.remove("mid-size"),t.target.closest("#ai-term-chat-window").classList.remove("min-size")}close(t){t.target.closest("#ai-term-chat-window").classList.remove("active"),t.target.closest("#ai-term-chat-window").classList.remove("max-size"),t.target.closest("#ai-term-chat-window").classList.remove("min-size"),t.target.closest("#ai-term-chat-window").classList.add("mid-size")}constructor(){super()
const t=document.getElementById("ai-term-chat").content,e=this.attachShadow({mode:"open"}),n=document.createElement("style")
n.textContent="\n        #ai-term-chat-window {\n          z-index: 1;\n          height: 400px;\n          width: 400px;\n          background: white;\n          position: fixed;\n          bottom: -410px;\n          right: 0vw;\n          display:flex;\n          flex-direction: column;\n          flex-wrap: nowrap;\n          align-items: center;\n          justify-content: flex-start;\n          border-radius: 20px 20px 0 0;\n          padding: 0px;\n          box-shadow: -5px 5px 10px #00000085;\n          transition:all 0.4s ease-in-out;\n          overflow: hidden;\n          color:black;\n        }\n\n        #ai-term-chat-window.mid-size{\n          height: 400px;\n        }\n\n        #ai-term-chat-window.min-size{\n          height: 50px;\n        }\n\n        #ai-term-chat-window.max-size{\n          height: calc(100dvh - 95px);\n        }\n\n        #ai-term-chat-window .title {\n          width: calc(100% - 50px);\n          border-radius: 20px 20px 0 0;\n          background-color: black;\n          padding: 14px 20px 14px 30px;\n          color: black;\n          font-size: large;\n          box-shadow: 5px 5px 10px #0000005c;\n          display: flex;\n          flex-direction: row;\n          flex-wrap: nowrap;\n          justify-content: space-between;\n          align-items: center;\n          color: white;\n        }\n\n        #ai-term-chat-window .title .window-buttons .span{\n          cursor:pointer;\n        }\n\n        #ai-term-chat-window.active {\n          bottom: 0vh;\n        }\n\n        \n        #ai-term-chat-window form {\n          width: 350px;\n          display: flex;\n          flex-direction: column;\n          flex-wrap: nowrap;\n          align-items: left;\n          padding:10px 20px;\n        }\n\n        #ai-term-chat-window form label{\n          line-height:1.5rem;\n          color: cornflowerblue;\n          border-bottom: 1px solid cornflowerblue;\n        }\n\n        #ai-term-chat-window form .prompt-ask{\n          display: flex;\n          flex-direction: row;\n          flex-wrap: nowrap;\n          margin-bottom:20px;\n          position: relative;\n        }\n\n        #ai-term-chat-window form input {\n          width: 100%;\n          line-height: 1.3rem;\n          border-radius: 10px;\n          border: 1px solid cornflowerblue;\n          height: 2.5rem;\n          padding-left: 10px;\n          padding-right: 50px;\n        }\n\n        #ai-term-chat-window form input:focus {\n          border: 2px solid cornflowerblue;\n        }\n\n        #ai-term-chat-window form button {\n          line-height:2em;\n          border-radius: 10px;\n          background-color: #c0d7ff;\n          border: 2px solid cornflowerblue;\n          box-shadow: 5px 5px 8px #36568f59;\n          cursor: pointer;\n          position: absolute;\n          right: 6px;\n          top: 5px;\n        }\n\n        #ai-term-chat-window form button:hover {\n      \n          background-color: #c0d7ffa0;\n          box-shadow: 5px 5px 8px #36568f69;\n   \n        }\n\n        #ai-term-chat-window form .textarea {\n          height: 200px;\n          line-height:1.5em;\n          margin-bottom:20px;\n          border-radius:10px;\n          border: 0px solid cornflowerblue;\n          color: black;\n          padding: 5px;\n          overflow-x: hidden;\n          overflow-y: scroll;\n        }\n\n        #ai-term-chat-window form .textarea>div{\n          width:100%;\n        }\n\n        #ai-term-chat-window form .textarea>div i{\n          color:cornflowerblue;\n        }\n        ",e.appendChild(n),e.appendChild(t.cloneNode(!0))
const i=e.querySelector("input"),o=e.querySelector(".textarea")
e.querySelector(".window-buttons .minify").addEventListener("click",this.minify),e.querySelector(".window-buttons .midify").addEventListener("click",this.midify),e.querySelector(".window-buttons .maxify").addEventListener("click",this.maxify),e.querySelector(".window-buttons .close").addEventListener("click",this.close),document.querySelector("body").aiTermInputRef=e.querySelector("input"),document.querySelector("body").aiTermChatWindowRef=e.querySelector("#ai-term-chat-window"),document.querySelector("body").aiTermButtonRef=e.querySelector("button"),e.querySelector("form").addEventListener("submit",(async t=>{if(t.preventDefault(),""==i.value)return
let e=document.createElement("div")
e.innerHTML=`<b>Me</b>: ${i.value}`,o.appendChild(e),e=document.createElement("div"),o.appendChild(e),e.innerHTML="<i>... AI is thinking ...</i>",o.scrollTop=o.scrollHeight
try{const t=await fetch("https://obscuranet.com/api/request",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({authkey:"xxx",url:window.location.href,model:"phi",prompt:i.value,refresh:!1})}),n=(await t.json()).response
e.innerHTML=`<b>AI</b>: ${n}`}catch(n){e.textContent="AI is overworked :-("}i.value="",o.scrollTop=o.scrollHeight}))}}customElements.define("ai-term-chat",AiTermChat)
